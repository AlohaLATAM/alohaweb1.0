!function(){"use strict";angular.module("frontApp",["ui.router","angular-ladda","Core","Views","Shared"])}(),function(){"use strict";window.__env__=window.__env__?window.__env__:{}}(),function(){"use strict";function a(a,b,c){b.otherwise("/"),c.html5Mode({enabled:window.__env__.HTML5MODE!==!1,requireBase:!1}),a.state("auth",{"abstract":!0,template:"<ui-view></ui-view>"}).state("auth.Dashboard",{url:"/",templateUrl:"scripts/views/auth/dashboard/dashboard.html",controller:"DashboardCtrl",controllerAs:"vm"}).state("auth.Leads",{url:"/leads",templateUrl:"scripts/views/auth/leads/leads.html",controller:"LeadsCtrl",controllerAs:"vm"}).state("auth.LeadDetails",{url:"/leads/{leadId}",templateUrl:"scripts/views/auth/leads/lead.html",controller:"LeadCtrl",controllerAs:"vm"}).state("auth.NewLead",{url:"/leads/nuevo",templateUrl:"scripts/views/auth/leads/newLead.html",controller:"NewLeadCtrl",controllerAs:"vm"}).state("auth.Quotation",{url:"/cotizador/{leadId}",templateUrl:"scripts/views/auth/quoting/quoting.html",controller:"QuotingCtrl",controllerAs:"vm"}).state("auth.QuotationDetails",{url:"/cotizacion/{quotationId}",templateUrl:"scripts/views/auth/quoting/quotation.html",controller:"QuotationCtrl",controllerAs:"vm"}).state("auth.Drivers",{url:"/choferes",templateUrl:"scripts/views/auth/drivers/drivers.html",controller:"DriversCtrl",controllerAs:"vm"}).state("auth.NewDriver",{url:"/choferes/nuevo",templateUrl:"scripts/views/auth/drivers/NewDriver.html",controller:"NewDriverCtrl",controllerAs:"vm"})}angular.module("frontApp").config(a),a.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"]}(),function(){"use strict";angular.module("Core",[])}(),function(){"use strict";var a={API_ROOT:window.__env__.API_ROOT||""};angular.module("Core").constant("Config",a)}(),function(){"use strict";var a={all_required:"Todos los campos son requeridos.",invalid_email_format:"Ingrese un correo válido."};angular.module("Core").constant("Message",a)}(),function(){"use strict";function a(){function a(a){var b=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;return a&&a.match(b)}return{validateEmail:a}}angular.module("Core").factory("Utils",a)}(),function(){"use strict";function a(){function a(a){return d.getItem(a)}function b(a,b){d.setItem(a,b)}function c(a){return a?d.removeItem(a):d.clear()}var d=window.localStorage;return{get:a,set:b,clear:c}}angular.module("Core").factory("Persist",a)}(),function(){"use strict";function a(a,b){function c(a){return o("auth",a)}function d(a){return o("leads",a)}function e(a){return p("leads",a)}function f(a,b){return p("leads/"+a,b)}function g(a){return p("truck_size_types",a)}function h(a){return p("home_types",a)}function i(a,b){return o("quotations",a,b)}function j(a,b){return p("quotations",a,b)}function k(a){return p("drivers",a)}function l(a){return p("districts",a)}function m(a,b){return o("drivers",a,b)}function n(a,b){return p("quotations/"+a,b)}function o(b,c,d){var e=r("csrftoken");e&&(a.defaults.headers.common["X-CSRFToken"]=e),b=q(b,d);var f=a.post(b,c);return f=f.then(function(a){return a.data})}function p(b,c,d){b=q(b,d);var e=a.get(b,{params:c});return e=e.then(function(a){return a.data})}function q(c,d){return d&&(a.defaults.headers.common.Authorization="Token "+d),b.API_ROOT+"/api/"+c+"/"}function r(a){var b=null;if(document.cookie&&""!=document.cookie)for(var c=document.cookie.split(";"),d=0;d<c.length;d++){var e=jQuery.trim(c[d]);if(e.substring(0,a.length+1)==a+"="){b=decodeURIComponent(e.substring(a.length+1));break}}return b}return{signIn:c,createLead:d,listLeads:e,getLead:f,listTruckTypes:g,listHomeTypes:h,createQuotation:i,listQuotations:j,listDrivers:k,listDistricts:l,createDriver:m,getQuotation:n}}angular.module("Core").factory("Api",a),a.$inject=["$http","Config"]}(),function(){"use strict";function a(a,b,c,d,e){function f(f,g){if(!f||!g)return a.reject(e.all_required);if(!c.validateEmail(f))return a.reject(e.invalid_email_format);var h={email:f,password:g},i=b.signIn(h);return i=i.then(function(a){return a.token&&d.set("token",a.token),a})}function g(d,f,g,h){if(!(d&&f&&g&&h))return a.reject(e.all_required);if(!c.validateEmail(g))return a.reject(e.invalid_email_format);var i={first_name:d,last_name:f,email:g,dni:h},j=b.createLead(i);return j=j.then(function(a){return a},function(b){return a.reject(b.data)})}function h(){var a=b.listLeads();return a=a.then(function(a){return a})}function i(c){if(!c)return a.reject("No está permitido.");var d=b.getLead(c);return d=d.then(function(a){return a})}function j(){var a=b.listTruckTypes();return a=a.then(function(a){return a})}function k(){var a=b.listHomeTypes();return a=a.then(function(a){return a})}function l(c){if(!(c.lead_id&&c.address_from&&c.home_type_from_id&&c.floor_from&&c.address_to&&c.home_type_to_id&&c.floor_to&&c.travel_distance_aprox&&c.travel_time_aprox&&c.truck_size_type_id&&c.packaging_time_aprox&&c.packaging_price&&c.travel_price&&c.total_price&&c.final_price&&c.profit))return $.reject("Verifique que todos los campos estén completos.");var d=b.createQuotation(c);return d=d.then(function(a){return a},function(b){return a.reject(b.data)})}function m(c){if(!c)return a.reject("El lead no existe.");var d={lead_id:c},e=b.listQuotations(d);return e=e.then(function(a){return a})}function n(){var a=b.listDrivers();return a=a.then(function(a){return a})}function o(){var a=b.listDistricts();return a=a.then(function(a){return a})}function p(c){if(!(c.first_name&&c.last_name&&c.phone_number&&c.dni&&c.license_number&&c.district_id))return $.reject("Verifique que todos los campos estén completos.");var d=b.createDriver(c);return d=d.then(function(a){return a},function(b){return a.reject(b.data)})}function q(c){if(!c)return a.reject("No se pudo encontrar la cotización.");var d=b.getQuotation(c);return d=d.then(function(a){return a})}return{signIn:f,createLead:g,listLeads:h,getLead:i,listTruckTypes:j,listHomeTypes:k,createQuotation:l,listQuotations:m,listDrivers:n,listDistricts:o,createDriver:p,getQuotation:q}}angular.module("Core").factory("Main",a),a.$inject=["$q","Api","Utils","Persist","Message"]}(),function(){"use strict";angular.module("Views",["Public","Auth"])}(),function(){"use strict";angular.module("Public",[])}(),function(){"use strict";function a(a){function b(){c.error=!1;var b=a.signIn(c.user.email,c.user.password);b.then(function(){},function(a){c.error=a})}var c=this;c.user={},c.signIn=b}angular.module("Public").controller("SigninCtrl",a),a.$inject=["Main"]}(),function(){"use strict";angular.module("Auth",[])}(),function(){"use strict";function a(){}angular.module("Auth").controller("DashboardCtrl",a)}(),function(){"use strict";function a(a,b,c){function d(){return g.leadId?(e(),void f()):a.go("auth.Leads")}function e(){var a=c.getLead(g.leadId);a.then(function(a){g.lead=a})}function f(){var a=c.listQuotations(g.leadId);a.then(function(a){g.quotations=a,g.quotations.length||(g.empty_list=!0)})}var g=this;g.leadId=b.leadId,d()}angular.module("Auth").controller("LeadCtrl",a),a.$inject=["$state","$stateParams","Main"]}(),function(){"use strict";function a(a){function b(){c()}function c(){d.loading=!0,d.empty_list=!1;var b=a.listLeads();b.then(function(a){d.list=a,d.list.length||(d.empty_list=!0)})["finally"](function(){d.loading=!1})}var d=this;d.loading=!1,b()}angular.module("Auth").controller("LeadsCtrl",a),a.$inject=["Main"]}(),function(){"use strict";function a(a,b){function c(){var c=b.createLead(d.lead.first_name,d.lead.last_name,d.lead.email,d.lead.dni);c.then(function(b){console.log(b),a.go("auth.Quotation",{leadId:b.id})},function(a){console.log(a),d.error=a})}var d=this;d.lead={},d.createLead=c}angular.module("Auth").controller("NewLeadCtrl",a),a.$inject=["$state","Main"]}(),function(){"use strict";function a(a,b,c,d){function e(){var a=c.leadId;return a?(m.quoting.lead_id=a,f(a),g(),h(),void i()):b.go("auth.Leads")}function f(a){m.loading=!0;var b=d.getLead(a);b.then(function(a){m.lead=a})["finally"](function(){m.loading=!1})}function g(){var a={zoom:7,center:q};n=new google.maps.Map(document.getElementById("map"),a),p.setMap(n),j()}function h(){var a=d.listTruckTypes();a.then(function(a){m.truckSizeTypes=a})}function i(){var a=d.listHomeTypes();a.then(function(a){m.homeTypes=a})}function j(){if(m.quoting.address_from&&m.quoting.address_to){var b={origin:m.quoting.address_from,destination:m.quoting.address_to,travelMode:google.maps.TravelMode.DRIVING,language:"es"};o.route(b,function(b,c){c===google.maps.DirectionsStatus.OK&&(p.setDirections(b),m.distance_aprox=b.routes[0].legs[0].distance.text,m.quoting.travel_distance_aprox=b.routes[0].legs[0].distance.value,m.time_travel_aprox=b.routes[0].legs[0].duration.text,m.quoting.travel_time_aprox=b.routes[0].legs[0].duration.value,k(),a.$apply())})}}function k(){if(m.quoting.travel_time_aprox&&m.quoting.truck_size_type_id){var a=m.quoting.travel_time_aprox/60,b=m.truckSizeTypes[m.quoting.truck_size_type_id-1].hour_price;m.quoting.packaging_price=(m.quoting.packaging_time_aprox*b/60).toFixed(2),m.quoting.travel_price=(a*b/60).toFixed(2),m.quoting.total_price=parseFloat(m.quoting.packaging_price)+parseFloat(m.quoting.travel_price),m.quoting.final_price=(m.quoting.total_price+50).toFixed(2)}}function l(){m.saving=!0,m.quoting.profit=(m.quoting.final_price-m.quoting.total_price).toFixed(2),console.log(JSON.stringify(m.quoting));var a=d.createQuotation(m.quoting);a.then(function(){b.go("auth.LeadDetails",{leadId:c.leadId})},function(a){console.log(a)})["finally"](function(){m.saving=!1})}var m=this;m.quoting={lead_id:null,address_from:"",home_type_from_id:"",floor_from:1,address_to:"",home_type_to_id:"",floor_to:1,travel_distance_aprox:0,travel_time_aprox:0,truck_size_type_id:"",packaging_time_aprox:0,packaging_price:0,travel_price:0,total_price:0,final_price:0,profit:0},m.search={},m.loading=!1,m.saving=!1;var n,o=new google.maps.DirectionsService,p=new google.maps.DirectionsRenderer,q=new google.maps.LatLng(-12.0266032,-77.1282069);e(),m.calculateRoute=j,m.calculateTruckPrice=k,m.registerQuotation=l}angular.module("Auth").controller("QuotingCtrl",a),a.$inject=["$scope","$state","$stateParams","Main"]}(),function(){"use strict";function a(a,b,c){function d(){return h.quotationId?void e():a.go("auth.Leads")}function e(){var a=c.getQuotation(h.quotationId);a.then(function(a){h.quotation=a,f()})}function f(){var a={zoom:7,center:l};i=new google.maps.Map(document.getElementById("map"),a),k.setMap(i),g()}function g(){var a={origin:h.quotation.address_from,destination:h.quotation.address_to,travelMode:google.maps.TravelMode.DRIVING,language:"es"};j.route(a,function(a,b){b===google.maps.DirectionsStatus.OK&&k.setDirections(a)})}var h=this;h.quotationId=b.quotationId,h.quotation={};var i,j=new google.maps.DirectionsService,k=new google.maps.DirectionsRenderer,l=new google.maps.LatLng(-12.0266032,-77.1282069);d()}angular.module("Auth").controller("QuotationCtrl",a),a.$inject=["$state","$stateParams","Main"]}(),function(){"use strict";function a(a){function b(){c()}function c(){d.loading=!0,d.empty_list=!1;var b=a.listDrivers();b.then(function(a){d.list=a,d.list.length||(d.empty_list=!0)})["finally"](function(){d.loading=!1})}var d=this;d.loading=!1,b()}angular.module("Auth").controller("DriversCtrl",a),a.$inject=["Main"]}(),function(){"use strict";function a(a,b){function c(){d()}function d(){var a=b.listDistricts();a.then(function(a){f.districts=a})}function e(){f.saving=!0,f.error=!1;var c=b.createDriver(f.driver);c.then(function(){a.go("auth.Drivers")},function(a){f.error=a})["finally"](function(){f.saving=!1})}var f=this;f.driver={first_name:"",last_name:"",phone_number:"",dni:"",license_number:"",district_id:null},c(),f.createDriver=e}angular.module("Auth").controller("NewDriverCtrl",a),a.$inject=["$state","Main"]}(),function(){"use strict";angular.module("Shared",[])}(),function(){"use strict";function a(){return{require:"ngModel",link:function(a,b,c,d){var e={types:[],componentRestrictions:{country:"pe"}};a.gPlace=new google.maps.places.Autocomplete(b[0],e),google.maps.event.addListener(a.gPlace,"place_changed",function(){a.$apply(function(){console.log(b.val()),d.$setViewValue(b.val())})})}}}angular.module("Shared").directive("googlePlace",a)}(),function(){"use strict";function a(){return{replace:!0,restrict:"E",templateUrl:"scripts/shared/loader/loader.html",scope:{}}}angular.module("Shared").directive("appLoader",a)}(),angular.module("frontApp").run(["$templateCache",function(a){"use strict";a.put("scripts/shared/loader/loader.html",'<div class="sk-cube-grid"> <div class="sk-cube sk-cube1"></div> <div class="sk-cube sk-cube2"></div> <div class="sk-cube sk-cube3"></div> <div class="sk-cube sk-cube4"></div> <div class="sk-cube sk-cube5"></div> <div class="sk-cube sk-cube6"></div> <div class="sk-cube sk-cube7"></div> <div class="sk-cube sk-cube8"></div> <div class="sk-cube sk-cube9"></div> </div>'),a.put("scripts/views/auth/dashboard/dashboard.html",'<div class="container"> <iframe width="100%" height="550" src="https://www.youtube.com/embed/ZuI61cTNbAk?autoplay=1" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe> </div>'),a.put("scripts/views/auth/drivers/drivers.html",'<div class="container"> <div class="leads leads-container text-center"> <div class="actions"> <ul class="list-inline pull-right"> <li> <a ui-sref="auth.NewDriver()" class="btn btn-success">Registrar Chofer</a> </li> </ul> </div> <div class="list-leads to-uppercase"> <table class="table table-striped"> <thead> <tr> <th></th> <th>Nombres</th> <th>Ubicación</th> <th>Teléfono</th> <th></th> </tr> </thead> <tbody class="text-left"> <tr ng-repeat="item in vm.list"> <td><img src="/images/driver.51d7436a.jpg" class="media-photo"></td> <td>{{ item.first_name }} {{ item.last_name }}</td> <td>{{ item.work_district.name }}</td> <td>{{ item.phone_number }}</td> <td> <a ui-sref="auth.NewTruck()">Registrar camión</a> </td> </tr> <tr ng-if="vm.empty_list"> <td colspan="6">No hay choferes registrados.</td> </tr> </tbody> </table> <app-loader ng-if="vm.loading"></app-loader> </div> </div> </div>'),a.put("scripts/views/auth/drivers/newDriver.html",'<div class="container"> <div class="leads leads-container"> <div class="page-header"> <h1 class="text-center text-muted">Nuevo Chofer</h1> </div> <form ng-submit="vm.createDriver()"> <div class="form-group"> <div class="col-md-6"> <label>Nombres</label> <input ng-model="vm.driver.first_name" type="text" class="form-control" autofocus> </div> <div class="col-md-6"> <label>Apellidos</label> <input ng-model="vm.driver.last_name" type="text" class="form-control"> </div> </div> <div class="form-group"> <div class="col-md-6"> <label>Teléfono</label> <input ng-model="vm.driver.phone_number" type="text" class="form-control"> </div> <div class="col-md-6"> <label>Nº DNI</label> <input ng-model="vm.driver.dni" type="text" class="form-control"> </div> </div> <div class="form-group"> <label>Nº Licencia</label> <input ng-model="vm.driver.license_number" type="text" class="form-control"> </div> <div class="form-group"> <label>Distrito en el que labora</label> <select ng-model="vm.driver.district_id" class="form-control"> <option value="">-- Elija un distrito --</option> <option ng-repeat="district in vm.districts" value="{{ district.id }}">{{ district.name }}</option> </select> </div> <div class="alert alert-danger" ng-if="vm.error">{{ vm.error }}</div> <button ladda="vm.saving" class="btn btn-lg btn-primary btn-block">REGISTRAR</button> </form> </div> </div>'),a.put("scripts/views/auth/leads/lead.html",'<div class="container"> <div class="list-leads to-uppercase"> <table class="table table-striped"> <thead> <tr> <th></th> <th>Nombre y Apellidos</th> <th>DNI</th> <th>Correo</th> </tr> </thead> <tbody class="text-left"> <tr> <td><img src="//panel.aloha.pe/static/images/lead.ce08db4f.jpg" class="media-photo"></td> <td>{{ vm.lead.first_name }} {{ vm.lead.last_name }}</td> <td>{{ vm.lead.dni }}</td> <td>{{ vm.lead.email }}</td> </tr> </tbody> </table> <div class="page-header"> <h1 class="text-muted">Cotizaciones</h1> </div> <div class="list-quotings"> <table class="table table-striped"> <thead> <tr> <th></th> <th>Desde</th> <th>Hasta</th> <th>Precio</th> <th></th> <th></th> </tr> </thead> <tbody class="text-left"> <tr ng-repeat="quotation in vm.quotations"> <td>{{ quotation.created | date:\'dd/MMM\' }}</td> <td>{{ quotation.address_from }}</td> <td>{{ quotation.address_to }}</td> <td>{{ quotation.final_price }}</td> <td ng-class="{\'win\': quotation.profit > 0}" class="earn">{{ quotation.profit }}</td> <td> <a ui-sref="auth.QuotationDetails({quotationId: quotation.id})">Ver</a> </td> </tr> <tr ng-if="vm.empty_list"> <td colspan="6">Este lead no tiene cotizaciones registradas.</td> </tr> </tbody> </table> </div> </div> </div>'),a.put("scripts/views/auth/leads/leads.html",'<div class="container"> <div class="leads leads-container text-center"> <div class="actions"> <ul class="list-inline pull-right"> <li> <a ui-sref="auth.NewLead()" class="btn btn-success">Nuevo Lead</a> </li> </ul> </div> <div class="list-leads to-uppercase"> <table class="table table-striped"> <thead> <tr> <th class="hidden-xs"></th> <th>Nombres</th> <th class="hidden-xs">DNI</th> <th>Correo</th> <th></th> </tr> </thead> <tbody class="text-left"> <tr ng-repeat="item in vm.list"> <td class="hidden-xs"><img src="//panel.aloha.pe/static/images/lead.ce08db4f.jpg" class="media-photo"></td> <td>{{ item.first_name }} {{ item.last_name }}</td> <td class="hidden-xs">{{ item.dni }}</td> <td>{{ item.email }}</td> <td> <a ui-sref="auth.Quotation({leadId: item.id})">Cotizar</a> <br> <a ui-sref="auth.LeadDetails({leadId: item.id})">Detalle</a> </td> </tr> <tr ng-if="vm.empty_list"> <td colspan="6">No hay leads registrados.</td> </tr> </tbody> </table> <app-loader ng-if="vm.loading"></app-loader> </div> </div> </div>'),a.put("scripts/views/auth/leads/newLead.html",'<div class="container"> <div class="leads leads-container"> <div class="page-header"> <h1 class="text-center text-muted">Nuevo Lead</h1> </div> <form ng-submit="vm.createLead()"> <div class="form-group"> <label>Nombres</label> <input ng-model="vm.lead.first_name" type="text" class="form-control" autofocus> </div> <div class="form-group"> <label>Apellidos</label> <input ng-model="vm.lead.last_name" type="text" class="form-control"> </div> <div class="form-group"> <label>Correo</label> <input ng-model="vm.lead.email" type="text" class="form-control"> </div> <div class="form-group"> <label>DNI</label> <input ng-model="vm.lead.dni" type="text" class="form-control"> </div> <div class="alert alert-danger" ng-if="vm.error">{{ vm.error }}</div> <button class="btn btn-lg btn-primary btn-block">COTIZAR</button> </form> </div> </div>'),a.put("scripts/views/auth/quoting/quotation.html",'<div class="container"> <div class="list-leads to-uppercase"> <table class="table table-striped hidden-xs"> <thead> <tr> <th></th> <th>Nombres</th> <th>DNI</th> <th>Correo</th> </tr> </thead> <tbody class="text-left"> <tr> <td><img src="//panel.aloha.pe/static/images/lead.ce08db4f.jpg" class="media-photo"></td> <td><a ui-sref="auth.LeadDetails({leadId: vm.quotation.lead.id})">{{ vm.quotation.lead.first_name }} {{ vm.quotation.lead.last_name }}</a></td> <td>{{ vm.quotation.lead.dni }}</td> <td>{{ vm.quotation.lead.email }}</td> </tr> </tbody> </table> <app-loader ng-if="vm.loading"></app-loader> </div> <div class="lead leads-container"> <div class="page-header"> <h1 class="text-center text-muted">Cotización [{{ vm.quotation.created | date}}]</h1> </div> <div class="form-group"> <label>¿Desde dónde se muda?</label> <div class="entry-value">{{ vm.quotation.address_from }}</div> </div> <div class="form-group"> <label>Tipo de vivienda</label> <div class="entry-value">{{ vm.quotation.home_type_from.name }}</div> </div> <div class="form-group"> <label>Piso</label> <div class="entry-value">{{ vm.quotation.floor_from }}</div> </div> <div class="form-group"> <label>¿Hasta dónde se muda?</label> <div class="entry-value">{{ vm.quotation.address_to }}</div> </div> <div class="form-group"> <label>Tipo de vivienda</label> <div class="entry-value">{{ vm.quotation.home_type_to.name }}</div> </div> <div class="form-group"> <label>Piso</label> <div class="entry-value">{{ vm.quotation.floor_to }}</div> </div> <div class="form-group"> <div id="map"></div> </div> <div class="form-group"> <div class="col-xs-6"> <label>Distancia aproximada</label> <div class="entry-value">{{ vm.quotation.travel_distance_aprox_label }}</div> </div> <div class="col-xs-6"> <label>Tiempo de viaje</label> <div class="entry-value">{{ vm.quotation.travel_time_aprox_label }}</div> </div> </div> <div class="form-group"> <label>Tipo de camión</label> <div class="entry-value"> {{ vm.quotation.truck_size_type.name }} </div> </div> <div class="form-group"> <label>Tiempo aproximado de la mudanza (Minutos)</label> <div class="entry-value">{{ vm.quotation.packaging_time_aprox }}</div> </div> <div class="summary"> <div class="page-header"> <h1 class="text-muted">Resumen</h1> </div> <div class="form-group"> <label>Precio por cargar cosas</label> <label class="pull-right"><strong>{{ vm.quotation.packaging_price }}</strong></label> </div> <div class="form-group"> <label>Precio transporte al nuevo punto</label> <label class="pull-right"><strong>{{ vm.quotation.travel_price }}</strong></label> </div> <div class="form-group"> <label>Precio por mudanza</label> <label class="pull-right"><strong>{{ vm.quotation.total_price }}</strong></label> </div> </div> <div class="summary"> <div class="page-header"> <h1 class="text-muted">Total</h1> </div> <div class="form-group"> <label>Precio acordado con el cliente</label> <label class="pull-right"><strong>{{ vm.quotation.final_price }}</strong></label> </div> </div> </div> </div>'),a.put("scripts/views/auth/quoting/quoting.html",'<div class="container"> <div class="list-leads to-uppercase"> <table class="table table-striped"> <thead> <tr> <th></th> <th>Nombre y Apellidos</th> <th>DNI</th> <th>Correo</th> </tr> </thead> <tbody class="text-left"> <tr> <td><img src="//panel.aloha.pe/static/images/lead.ce08db4f.jpg" class="media-photo"></td> <td><a ui-sref="auth.LeadDetails({leadId: vm.lead.id})">{{ vm.lead.first_name }} {{ vm.lead.last_name }}</a></td> <td>{{ vm.lead.dni }}</td> <td>{{ vm.lead.email }}</td> </tr> </tbody> </table> <app-loader ng-if="vm.loading"></app-loader> </div> <div class="lead leads-container"> <div class="page-header"> <h1 class="text-center text-muted">Cotizador</h1> </div> <form ng-submit="vm.registerQuotation()"> <div class="form-group"> <label>¿Desde dónde se muda?</label> <input ng-model="vm.quoting.address_from" ng-blur="vm.calculateRoute()" google-place type="text" class="form-control" autofocus> </div> <div class="form-group"> <label>Tipo de vivienda</label> <select ng-model="vm.quoting.home_type_from_id" class="form-control"> <option value="">-- Elige un tipo de vivienda --</option> <option ng-repeat="type in vm.homeTypes" value="{{ type.id }}">{{ type.name }}</option> </select> </div> <div class="form-group"> <label>Piso</label> <input ng-model="vm.quoting.floor_from" type="number" class="form-control"> </div> <div class="form-group"> <label>¿Hasta dónde se muda?</label> <input ng-model="vm.quoting.address_to" ng-blur="vm.calculateRoute()" google-place type="text" class="form-control"> </div> <div class="form-group"> <label>Tipo de vivienda</label> <select ng-model="vm.quoting.home_type_to_id" class="form-control"> <option value="">-- Elige un tipo de vivienda --</option> <option ng-repeat="type in vm.homeTypes" value="{{ type.id }}">{{ type.name }}</option> </select> </div> <div class="form-group"> <label>Piso</label> <input ng-model="vm.quoting.floor_to" type="number" class="form-control"> </div> <div class="form-group"> <div id="map"></div> </div> <div class="form-group"> <div class="col-xs-6"> <label>Distancia aproximada</label> <input ng-model="vm.distance_aprox" type="text" class="form-control" disabled> </div> <div class="col-xs-6"> <label>Tiempo de viaje</label> <input ng-model="vm.time_travel_aprox" type="text" class="form-control" disabled> </div> </div> <div class="form-group"> <label>Tipo de camión</label> <select ng-model="vm.quoting.truck_size_type_id" ng-change="vm.calculateTruckPrice()" class="form-control"> <option value="">-- Elige el tipo de camión --</option> <option ng-repeat="truck_size_type in vm.truckSizeTypes" value="{{ truck_size_type.id }}">{{ truck_size_type.name }}</option> </select> </div> <div class="form-group"> <label>Tiempo aproximado de la mudanza (Minutos)</label> <input ng-change="vm.calculateTruckPrice()" ng-model="vm.quoting.packaging_time_aprox" type="number" class="form-control"> </div> <div class="summary"> <div class="page-header"> <h1 class="text-muted">Resumen</h1> </div> <div class="form-group"> <label>Precio por cargar cosas</label> <label class="pull-right"><strong>{{ vm.quoting.packaging_price }}</strong></label> </div> <div class="form-group"> <label>Precio transporte al nuevo punto</label> <label class="pull-right"><strong>{{ vm.quoting.travel_price }}</strong></label> </div> <div class="form-group"> <label>Precio por mudanza</label> <label class="pull-right"><strong>{{ vm.quoting.total_price }}</strong></label> </div> </div> <div class="summary"> <div class="page-header"> <h1 class="text-muted">Total</h1> </div> <div class="form-group"> <label>Precio acordado con el cliente</label> <input ng-model="vm.quoting.final_price" type="text" class="form-control"> </div> </div> <button ladda="vm.saving" class="btn btn-lg btn-primary btn-block">GUARDAR</button> </form> </div> </div>'),a.put("scripts/views/public/signin/signin.html",'<div class="container"> <div class="card card-container"> <img id="profile-img" class="profile-img-card" src="//ssl.gstatic.com/accounts/ui/avatar_2x.png"> <form ng-submit="vm.signIn()" class="form-signin"> <input ng-model="vm.user.email" type="email" class="form-control" placeholder="Correo" required autofocus> <input ng-model="vm.user.password" type="password" class="form-control" placeholder="Contraseña" required> <div ng-if="vm.error" class="alert alert-danger small">{{ vm.error }}</div> <button class="btn btn-primary btn-block" type="submit">Sign in</button> </form> </div> </div>')}]);