!function(){"use strict";angular.module("frontApp",["ui.router","ui.bootstrap","angular-ladda","Core","Views","Shared"])}(),function(){"use strict";window.__env__=window.__env__?window.__env__:{}}(),function(){"use strict";function a(a,b,c){b.otherwise("/"),c.html5Mode({enabled:window.__env__.HTML5MODE!==!1,requireBase:!1}),a.state("auth",{"abstract":!0,template:"<ui-view></ui-view>"}).state("auth.Dashboard",{url:"/",templateUrl:"scripts/views/auth/dashboard/dashboard.html",controller:"DashboardCtrl",controllerAs:"vm"}).state("auth.Leads",{url:"/leads",templateUrl:"scripts/views/auth/leads/leads.html",controller:"LeadsCtrl",controllerAs:"vm"}).state("auth.LeadDetails",{url:"/leads/{leadId}",templateUrl:"scripts/views/auth/leads/lead.html",controller:"LeadCtrl",controllerAs:"vm"}).state("auth.NewLead",{url:"/leads/nuevo",templateUrl:"scripts/views/auth/leads/newLead.html",controller:"NewLeadCtrl",controllerAs:"vm"}).state("auth.Quotation",{url:"/cotizador/{leadId}",templateUrl:"scripts/views/auth/quoting/quoting.html",controller:"QuotingCtrl",controllerAs:"vm"}).state("auth.QuotationDetails",{url:"/cotizacion/{quotationId}",templateUrl:"scripts/views/auth/quoting/quotation.html",controller:"QuotationCtrl",controllerAs:"vm"}).state("auth.Inventory",{url:"/cotizacion/{quotationId}/inventario",templateUrl:"scripts/views/auth/inventory/inventory.html",controller:"InventoryCtrl",controllerAs:"vm"}).state("auth.Drivers",{url:"/choferes",templateUrl:"scripts/views/auth/drivers/drivers.html",controller:"DriversCtrl",controllerAs:"vm"}).state("auth.DriversDetails",{url:"/choferes/{driverId}",templateUrl:"scripts/views/auth/drivers/driver.html",controller:"DriverCtrl",controllerAs:"vm"}).state("auth.NewDriver",{url:"/choferes/nuevo",templateUrl:"scripts/views/auth/drivers/newDriver.html",controller:"NewDriverCtrl",controllerAs:"vm"}).state("auth.DriverTruck",{url:"/choferes/{driverId}/camiones",templateUrl:"scripts/views/auth/trucks/newTruck.html",controller:"NewTruckCtrl",controllerAs:"vm"})}angular.module("frontApp").config(a),a.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"]}(),function(){"use strict";angular.module("Core",[])}(),function(){"use strict";var a={API_ROOT:window.__env__.API_ROOT||""};angular.module("Core").constant("Config",a)}(),function(){"use strict";var a={all_required:"Todos los campos son requeridos.",invalid_email_format:"Ingrese un correo válido."};angular.module("Core").constant("Message",a)}(),function(){"use strict";function a(){function a(a){var b=/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/;return a&&a.match(b)}return{validateEmail:a}}angular.module("Core").factory("Utils",a)}(),function(){"use strict";function a(){function a(a){return d.getItem(a)}function b(a,b){d.setItem(a,b)}function c(a){return a?d.removeItem(a):d.clear()}var d=window.localStorage;return{get:a,set:b,clear:c}}angular.module("Core").factory("Persist",a)}(),function(){"use strict";function a(a,b){function c(a){return r("auth",a)}function d(a){return r("leads",a)}function e(a){return s("leads",a)}function f(a,b){return s("leads/"+a,b)}function g(a){return s("truck_size_types",a)}function h(a){return s("home_types",a)}function i(a,b){return r("quotations",a,b)}function j(a,b){return s("quotations",a,b)}function k(a){return s("drivers",a)}function l(a){return s("districts",a)}function m(a,b){return r("drivers",a,b)}function n(a,b){return s("quotations/"+a,b)}function o(a,b){return s("inventory",a,b)}function p(a,b){return r("inventory",a,b)}function q(a,b,c){return t("inventory/"+a,b,c)}function r(b,c,d){var e=v("csrftoken");e&&(a.defaults.headers.common["X-CSRFToken"]=e),b=u(b,d);var f=a.post(b,c);return f=f.then(function(a){return a.data})}function s(b,c,d){b=u(b,d);var e=a.get(b,{params:c});return e=e.then(function(a){return a.data})}function t(b,c,d){b=u(b,d);var e=a["delete"](b,{params:c});return e=e.then(function(a){return a.data})}function u(c,d){return d&&(a.defaults.headers.common.Authorization="Token "+d),b.API_ROOT+"/api/"+c+"/"}function v(a){var b=null;if(document.cookie&&""!=document.cookie)for(var c=document.cookie.split(";"),d=0;d<c.length;d++){var e=jQuery.trim(c[d]);if(e.substring(0,a.length+1)==a+"="){b=decodeURIComponent(e.substring(a.length+1));break}}return b}return{signIn:c,createLead:d,listLeads:e,getLead:f,listTruckTypes:g,listHomeTypes:h,createQuotation:i,listQuotations:j,listDrivers:k,listDistricts:l,createDriver:m,getQuotation:n,getInventory:o,createInventoryItem:p,destroyInventoryItem:q}}angular.module("Core").factory("Api",a),a.$inject=["$http","Config"]}(),function(){"use strict";function a(a,b,c,d,e){function f(f,g){if(!f||!g)return a.reject(e.all_required);if(!c.validateEmail(f))return a.reject(e.invalid_email_format);var h={email:f,password:g},i=b.signIn(h);return i=i.then(function(a){return a.token&&d.set("token",a.token),a})}function g(c,d,f,g){if(!c||!d||!f)return a.reject(e.all_required);var h={first_name:c,last_name:d,phone_number:f,dni:g},i=b.createLead(h);return i=i.then(function(a){return a},function(b){return a.reject(b.data)})}function h(){var a=b.listLeads();return a=a.then(function(a){return a})}function i(c){if(!c)return a.reject("No está permitido.");var d=b.getLead(c);return d=d.then(function(a){return a})}function j(){var a=b.listTruckTypes();return a=a.then(function(a){return a})}function k(){var a=b.listHomeTypes();return a=a.then(function(a){return a})}function l(c){if(!(c.lead_id&&c.address_from&&c.home_type_from_id&&c.floor_from&&c.address_to&&c.home_type_to_id&&c.floor_to&&c.travel_distance_aprox&&c.travel_time_aprox&&c.truck_size_type_id&&c.packaging_time_aprox&&c.packaging_price&&c.travel_price&&c.total_price&&c.final_price&&c.profit))return a.reject("Verifique que todos los campos estén completos.");var d=b.createQuotation(c);return d=d.then(function(a){return a},function(b){return a.reject(b.data)})}function m(c){if(!c)return a.reject("El lead no existe.");var d={lead_id:c},e=b.listQuotations(d);return e=e.then(function(a){return a})}function n(){var a=b.listDrivers();return a=a.then(function(a){return a})}function o(){var a=b.listDistricts();return a=a.then(function(a){return a})}function p(c){if(!(c.first_name&&c.last_name&&c.phone_number&&c.dni&&c.license_number&&c.district_id))return $.reject("Verifique que todos los campos estén completos.");var d=b.createDriver(c);return d=d.then(function(a){return a},function(b){return a.reject(b.data)})}function q(c){if(!c)return a.reject("No se pudo encontrar la cotización.");var d=b.getQuotation(c);return d=d.then(function(a){return a})}function r(b){return b?void 0:a.rejec("El chofer no existe.")}function s(c){if(!c)return a.reject("No se pudo encontrar la cotización.");var d={quotation_id:c},e=b.getInventory(d);return e=e.then(function(a){return a})}function t(c,d,e){if(!c)return a.reject("No se pudo encontrar la cotización.");if(!d||!e)return a.reject("Todos los campos son obligatorios.");var f={quotation_id:c,quantity:d,item_name:e},g=b.createInventoryItem(f);return g=g.then(function(a){return a},function(b){return a.reject(b.data)})}function u(c,d){if(!c)return a.reject("No se pudo encontrar la cotización.");if(!d)return a.reject("No se pudo encontrar la item.");var e={quotation_id:c},f=b.destroyInventoryItem(d,e);return f=f.then(function(a){return a},function(b){return a.reject(b)})}return{signIn:f,createLead:g,listLeads:h,getLead:i,listTruckTypes:j,listHomeTypes:k,createQuotation:l,listQuotations:m,listDrivers:n,listDistricts:o,createDriver:p,getQuotation:q,getDriver:r,getInventory:s,createInventoryItem:t,destroyInventoryItem:u}}angular.module("Core").factory("Main",a),a.$inject=["$q","Api","Utils","Persist","Message"]}(),function(){"use strict";angular.module("Views",["Public","Auth"])}(),function(){"use strict";angular.module("Public",[])}(),function(){"use strict";function a(a){function b(){c.error=!1;var b=a.signIn(c.user.email,c.user.password);b.then(function(){},function(a){c.error=a})}var c=this;c.user={},c.signIn=b}angular.module("Public").controller("SigninCtrl",a),a.$inject=["Main"]}(),function(){"use strict";angular.module("Auth",[])}(),function(){"use strict";function a(){}angular.module("Auth").controller("DashboardCtrl",a)}(),function(){"use strict";function a(a,b,c){function d(){return g.leadId?(e(),void f()):a.go("auth.Leads")}function e(){var a=c.getLead(g.leadId);a.then(function(a){g.lead=a})}function f(){var a=c.listQuotations(g.leadId);a.then(function(a){g.quotations=a,g.quotations.length||(g.empty_list=!0)})}var g=this;g.leadId=b.leadId,d()}angular.module("Auth").controller("LeadCtrl",a),a.$inject=["$state","$stateParams","Main"]}(),function(){"use strict";function a(a){function b(){c()}function c(){d.loading=!0,d.empty_list=!1;var b=a.listLeads();b.then(function(a){d.list=a,d.list.length||(d.empty_list=!0)})["finally"](function(){d.loading=!1})}var d=this;d.loading=!1,b()}angular.module("Auth").controller("LeadsCtrl",a),a.$inject=["Main"]}(),function(){"use strict";function a(a,b){function c(){var c=b.createLead(e.lead.first_name,e.lead.last_name,e.lead.phone_number,e.lead.dni);c.then(function(b){console.log(b),a.go("auth.Quotation",{leadId:b.id})},function(a){console.log(a),e.error=a})}function d(){e.lead={first_name:"",last_name:"",phone_number:"",dni:""}}var e=this;e.lead={},e.createLead=c,e.clearForm=d}angular.module("Auth").controller("NewLeadCtrl",a),a.$inject=["$state","Main"]}(),function(){"use strict";function a(a,b,c,d){function e(){var a=c.leadId;return a?(n.quoting.lead_id=a,f(a),g(),h(),void i()):b.go("auth.Leads")}function f(a){n.loading=!0;var b=d.getLead(a);b.then(function(a){n.lead=a})["finally"](function(){n.loading=!1})}function g(){var a={zoom:7,center:r};o=new google.maps.Map(document.getElementById("map"),a),q.setMap(o),j()}function h(){var a=d.listTruckTypes();a.then(function(a){n.truckSizeTypes=a})}function i(){var a=d.listHomeTypes();a.then(function(a){n.homeTypes=a})}function j(){if(n.quoting.address_from&&n.quoting.address_to){var b={origin:n.quoting.address_from,destination:n.quoting.address_to,travelMode:google.maps.TravelMode.DRIVING,language:"es"};p.route(b,function(b,c){c===google.maps.DirectionsStatus.OK&&(q.setDirections(b),n.quoting.travel_distance_aprox_label=n.distance_aprox=b.routes[0].legs[0].distance.text,n.quoting.travel_distance_aprox=b.routes[0].legs[0].distance.value,n.quoting.travel_time_aprox_label=n.time_travel_aprox=b.routes[0].legs[0].duration.text,n.quoting.travel_time_aprox=2*b.routes[0].legs[0].duration.value,k(),a.$apply())})}}function k(){if(n.quoting.travel_time_aprox&&n.quoting.truck_size_type_id){var a=n.quoting.travel_time_aprox/60,b=n.truckSizeTypes[n.quoting.truck_size_type_id-1].hour_price;n.quoting.packaging_price=(n.quoting.packaging_time_aprox*b/60).toFixed(2),n.quoting.travel_price=(a*b/60).toFixed(2),n.quoting.total_price=parseFloat(n.quoting.packaging_price)+parseFloat(n.quoting.travel_price),n.quoting.final_price=(n.quoting.total_price+50).toFixed(2)}}function l(){n.saving=!0,n.quoting.profit=(n.quoting.final_price-n.quoting.total_price).toFixed(2);var a=d.createQuotation(n.quoting);a.then(function(a){b.go("auth.QuotationDetails",{quotationId:a.id})},function(a){n.error=a})["finally"](function(){n.saving=!1})}function m(){n.quoting.packaging_time_aprox=n.truckSizeTypes[n.quoting.truck_size_type_id-1].time_per_service,k()}var n=this;n.quoting={lead_id:null,address_from:"",home_type_from_id:"",floor_from:1,address_to:"",home_type_to_id:"",floor_to:1,travel_distance_aprox:0,travel_time_aprox:0,truck_size_type_id:"",packaging_time_aprox:0,packaging_price:0,travel_price:0,total_price:0,final_price:0,profit:0},n.search={},n.loading=!1,n.saving=!1;var o,p=new google.maps.DirectionsService,q=new google.maps.DirectionsRenderer,r=new google.maps.LatLng(-12.0266032,-77.1282069);e(),n.calculateRoute=j,n.calculateTruckPrice=k,n.registerQuotation=l,n.changeServiceTime=m}angular.module("Auth").controller("QuotingCtrl",a),a.$inject=["$scope","$state","$stateParams","Main"]}(),function(){"use strict";function a(a,b,c,d,e){function f(){return m.editable=!1,m.quotationId?(i(),j(),void a(g,1e3)):b.go("auth.Leads")}function g(){var a=e.getQuotation(m.quotationId);a.then(function(a){m.quotation=a,m.lead=m.quotation.lead,m.quotation.home_type_to_id=m.quotation.home_type_to.id.toString(),m.quotation.home_type_from_id=m.quotation.home_type_from.id.toString(),m.quotation.truck_size_type_id=m.quotation.truck_size_type.id.toString(),m.distance_aprox=m.quotation.travel_distance_aprox_label,m.time_travel_aprox=m.quotation.travel_time_aprox_label,h()})}function h(){var a={zoom:7,center:q};n=new google.maps.Map(document.getElementById("map"),a),p.setMap(n),k()}function i(){var a=e.listTruckTypes();a.then(function(a){m.truckSizeTypes=a})}function j(){var a=e.listHomeTypes();a.then(function(a){m.homeTypes=a})}function k(){var a={origin:m.quotation.address_from,destination:m.quotation.address_to,travelMode:google.maps.TravelMode.DRIVING,language:"es"};o.route(a,function(a,b){b===google.maps.DirectionsStatus.OK&&p.setDirections(a)})}function l(){d.open({templateUrl:"scripts/views/auth/inventory/inventory.html",controller:"InventoryCtrl",controllerAs:"vm",resolve:{QuotationId:function(){return m.quotationId},Lead:function(){return m.lead}}})}var m=this;m.quotationId=c.quotationId,m.quotation={};var n,o=new google.maps.DirectionsService,p=new google.maps.DirectionsRenderer,q=new google.maps.LatLng(-12.0266032,-77.1282069);f(),m.calculateRoute=k,m.init=f,m.openInventory=l}angular.module("Auth").controller("QuotationCtrl",a),a.$inject=["$timeout","$state","$stateParams","$uibModal","Main"]}(),function(){"use strict";function a(a){function b(){c()}function c(){d.loading=!0,d.empty_list=!1;var b=a.listDrivers();b.then(function(a){d.list=a,d.list.length||(d.empty_list=!0)})["finally"](function(){d.loading=!1})}var d=this;d.loading=!1,b()}angular.module("Auth").controller("DriversCtrl",a),a.$inject=["Main"]}(),function(){"use strict";function a(a,b){function c(){d()}function d(){var a=b.listDistricts();a.then(function(a){f.districts=a})}function e(){f.saving=!0,f.error=!1;var c=b.createDriver(f.driver);c.then(function(){a.go("auth.Drivers")},function(a){f.error=a})["finally"](function(){f.saving=!1})}var f=this;f.driver={first_name:"",last_name:"",phone_number:"",dni:"",license_number:"",district_id:null},c(),f.createDriver=e}angular.module("Auth").controller("NewDriverCtrl",a),a.$inject=["$state","Main"]}(),function(){"use strict";function a(a,b,c){function d(){return f.driverId?void e():a.go("auth.Drivers")}function e(){var a=c.getDriver(f.driverId);a.then(function(a){f.driver=a})}var f=this;f.driverId=b.driverId,d()}angular.module("Auth").controller("NewTruckCtrl",a),a.$inject=["$state","$stateParams","Main"]}(),function(){"use strict";function a(a,b,c,d){function e(){g()}function f(){i.addingItem=!0;var a=b.createInventoryItem(i.quotationId,i.newItem.quantity,i.newItem.item_name);a.then(function(){i.newItem={},g()})["finally"](function(){i.addingItem=!1,i.startNewItem=!0})}function g(){var a=b.getInventory(i.quotationId);a.then(function(a){i.inventoryList=a})}function h(a){var c=b.destroyInventoryItem(i.quotationId,a);c.then(function(){g()},function(a){console.log(a)})}var i=this;i.quotationId=c,i.lead=d,i.newItem={},i.startNewItem=!0,e(),i.addItem=f,i.deleteItem=h}angular.module("Auth").controller("InventoryCtrl",a),a.$inject=["$stateParams","Main","QuotationId","Lead"]}(),function(){"use strict";angular.module("Shared",[])}(),function(){"use strict";function a(){return{require:"ngModel",link:function(a,b,c,d){var e={types:[],componentRestrictions:{country:"pe"}};a.gPlace=new google.maps.places.Autocomplete(b[0],e),google.maps.event.addListener(a.gPlace,"place_changed",function(){a.$apply(function(){console.log(b.val()),d.$setViewValue(b.val())})})}}}angular.module("Shared").directive("googlePlace",a)}(),function(){"use strict";function a(){return{replace:!0,restrict:"E",templateUrl:"scripts/shared/loader/loader.html",scope:{}}}angular.module("Shared").directive("appLoader",a)}(),function(){"use strict";function a(){return{replace:!0,restrict:"E",templateUrl:"scripts/shared/lead/lead.html",scope:{lead:"="}}}angular.module("Shared").directive("appLead",a)}(),angular.module("frontApp").run(["$templateCache",function(a){"use strict";a.put("scripts/shared/lead/lead.html",'<table class="table table-striped"> <thead> <tr> <th></th> <th>Nombre y Apellidos</th> <th>Teléfono</th> <th>Correo</th> <th>DNI</th> </tr> </thead> <tbody class="text-left"> <tr> <td><img src="//panel.aloha.pe/static/images/lead.ce08db4f.jpg" class="media-photo"></td> <td><a ui-sref="auth.LeadDetails({leadId: lead.id})">{{ lead.first_name }} {{ lead.last_name }}</a></td> <td>{{ lead.phone_number }}</td> <td>{{ lead.email }}</td> <td>{{ lead.dni }}</td> </tr> </tbody> </table>'),a.put("scripts/shared/loader/loader.html",'<div class="sk-cube-grid"> <div class="sk-cube sk-cube1"></div> <div class="sk-cube sk-cube2"></div> <div class="sk-cube sk-cube3"></div> <div class="sk-cube sk-cube4"></div> <div class="sk-cube sk-cube5"></div> <div class="sk-cube sk-cube6"></div> <div class="sk-cube sk-cube7"></div> <div class="sk-cube sk-cube8"></div> <div class="sk-cube sk-cube9"></div> </div>'),a.put("scripts/views/auth/dashboard/dashboard.html",'<div class="container"> <iframe width="100%" height="550" src="https://www.youtube.com/embed/ZuI61cTNbAk?autoplay=1" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen></iframe> </div>'),a.put("scripts/views/auth/drivers/driver.html",""),a.put("scripts/views/auth/drivers/drivers.html",'<div class="container"> <div class="leads leads-container text-center"> <div class="actions"> <ul class="list-inline pull-right"> <li> <a ui-sref="auth.NewDriver()" class="btn btn-success">Registrar Chofer</a> </li> </ul> </div> <div class="list-leads to-uppercase"> <table class="table table-striped"> <thead> <tr> <th></th> <th>Nombres</th> <th>Ubicación</th> <th>Teléfono</th> <th></th> </tr> </thead> <tbody class="text-left"> <tr ng-repeat="item in vm.list"> <td><img src="/images/driver.51d7436a.jpg" class="media-photo"></td> <td><a ui-sref="auth.DriverTruck({driverId: item.id})">{{ item.first_name }} {{ item.last_name }}</a></td> <td>{{ item.work_district.name }}</td> <td>{{ item.phone_number }}</td> <td> <a ui-sref="auth.DriverTruck({driverId: item.id})">Registrar camión</a> </td> </tr> <tr ng-if="vm.empty_list"> <td colspan="6">No hay choferes registrados.</td> </tr> </tbody> </table> <app-loader ng-if="vm.loading"></app-loader> </div> </div> </div>'),a.put("scripts/views/auth/drivers/newDriver.html",'<div class="container"> <div class="leads leads-container"> <div class="page-header"> <h1 class="text-center text-muted">Nuevo Chofer</h1> </div> <form ng-submit="vm.createDriver()" class="form"> <div class="form-group"> <div class="col-md-6"> <label>Nombres</label> <input ng-model="vm.driver.first_name" type="text" class="form-control" autofocus> </div> <div class="col-md-6"> <label>Apellidos</label> <input ng-model="vm.driver.last_name" type="text" class="form-control"> </div> </div> <div class="form-group"> <div class="col-md-6"> <label>Teléfono</label> <input ng-model="vm.driver.phone_number" type="text" class="form-control"> </div> <div class="col-md-6"> <label>Nº DNI</label> <input ng-model="vm.driver.dni" type="text" class="form-control"> </div> </div> <div class="form-group"> <label>Nº Licencia</label> <input ng-model="vm.driver.license_number" type="text" class="form-control"> </div> <div class="form-group"> <label>Distrito en el que labora</label> <select ng-model="vm.driver.district_id" class="form-control"> <option value="">-- Elija un distrito --</option> <option ng-repeat="district in vm.districts" value="{{ district.id }}">{{ district.name }}</option> </select> </div> <div class="alert alert-danger" ng-if="vm.error">{{ vm.error }}</div> <button ladda="vm.saving" class="btn btn-lg btn-primary btn-block">REGISTRAR</button> </form> </div> </div>'),a.put("scripts/views/auth/inventory/inventory.html",'<div class="container"> <div class="leads leads-container"> <div class="form"> <div class="form-group"> <div class="col-xs-12"> <label>Correo electrónico</label> <input ng-model="vm.lead.email" type="text" class="form-control" autofocus> </div> </div> <div class="page-header"> <h1 class="text-center text-muted">Inventario</h1> </div> <form ng-submit="vm.addItem()"> <div class="form-group"> <div class="col-xs-4"> <input ng-focus="vm.startNewItem" ng-model="vm.newItem.quantity" min="1" type="number" placeholder="Cantidad" class="form-control"> </div> <div class="col-md-6"> <input ng-model="vm.newItem.item_name" type="text" placeholder="Nombre" class="form-control"> </div> <div class="col-xs-2"> <button ladda="vm.addingItem" class="btn btn-success btn-block"><i class="fa fa-plus"></i></button> </div> </div> </form> <table class="table"> <tr ng-repeat="item in vm.inventoryList"> <td> <label>{{ item.quantity }}</label> </td> <td> <label>{{ item.item_name }}</label> </td> <td> <label><a ng-click="vm.deleteItem(item.id)"><i class="fa fa-trash"></i></a></label> </td> </tr> </table> <div class="alert alert-danger small" ng-if="vm.error">{{ vm.error }}</div> <hr> <div class="form-group"> <div class="col-md-8 pull-right"> <button class="btn btn-lg btn-primary btn-block">GUARDAR Y ENVIAR <i class="fa fa-long-arrow-right"></i></button> </div> <div class="col-md-4"> <button ng-click="vm.clearForm()" class="btn btn-lg btn-default btn-block" type="button">CERRAR</button> </div> </div> </div> </div> </div>'),a.put("scripts/views/auth/leads/lead.html",'<div class="container"> <div class="list-leads to-uppercase"> <app-lead lead="vm.lead"></app-lead> <div class="page-header"> <h1 class="text-muted">Cotizaciones</h1> </div> <a ui-sref="auth.Quotation({leadId: vm.leadId})" class="btn btn-primary">Crear cotización</a> <div class="list-quotings"> <table class="table table-striped"> <thead> <tr> <th></th> <th>Desde</th> <th>Hasta</th> <th>Precio</th> <th></th> <th></th> </tr> </thead> <tbody class="text-left"> <tr ng-repeat="quotation in vm.quotations"> <td>{{ quotation.created | date:\'dd/MMM\' }}</td> <td>{{ quotation.address_from }}</td> <td>{{ quotation.address_to }}</td> <td>{{ quotation.final_price }}</td> <td ng-class="{\'win\': quotation.profit > 0}" class="earn">{{ quotation.profit }}</td> <td> <a ui-sref="auth.QuotationDetails({quotationId: quotation.id})">Ver</a> </td> </tr> <tr ng-if="vm.empty_list"> <td colspan="6">Este lead no tiene cotizaciones registradas.</td> </tr> </tbody> </table> </div> </div> </div>'),a.put("scripts/views/auth/leads/leads.html",'<div class="container"> <div class="leads leads-container text-center"> <div class="actions"> <ul class="list-inline pull-right"> <li> <a ui-sref="auth.NewLead()" class="btn btn-success">Nuevo Lead</a> </li> </ul> </div> <div class="list-leads to-uppercase"> <table class="table table-striped"> <thead> <tr> <th class="hidden-xs"></th> <th>Nombres</th> <th>Teléfono</th> <th class="hidden-xs">Correo</th> <th></th> </tr> </thead> <tbody class="text-left"> <tr ng-repeat="item in vm.list"> <td class="hidden-xs"><img src="//panel.aloha.pe/static/images/lead.ce08db4f.jpg" class="media-photo"></td> <td><a ui-sref="auth.LeadDetails({leadId: item.id})">{{ item.first_name }} {{ item.last_name }}</a></td> <td>{{ item.phone_number }}</td> <td class="hidden-xs">{{ item.email }}</td> <td> <a ui-sref="auth.Quotation({leadId: item.id})">Cotizar</a> <br> <a ui-sref="auth.LeadDetails({leadId: item.id})">Detalle</a> </td> </tr> <tr ng-if="vm.empty_list"> <td colspan="6">No hay leads registrados.</td> </tr> </tbody> </table> <app-loader ng-if="vm.loading"></app-loader> </div> </div> </div>'),a.put("scripts/views/auth/leads/newLead.html",'<div class="container"> <div class="leads leads-container"> <div class="page-header"> <h1 class="text-center text-muted">Nuevo Lead</h1> </div> <form ng-submit="vm.createLead()" class="form"> <div class="form-group"> <div class="col-md-6"> <label>Nombres <span class="small">*</span></label> <input ng-model="vm.lead.first_name" type="text" class="form-control" autofocus> </div> <div class="col-md-6"> <label>Apellidos <span class="small">*</span></label> <input ng-model="vm.lead.last_name" type="text" class="form-control"> </div> </div> <div class="form-group"> <div class="col-md-6"> <label>Teléfono <span class="small">*</span></label> <input ng-model="vm.lead.phone_number" type="text" class="form-control"> </div> <div class="col-md-6"> <label>DNI</label> <input ng-model="vm.lead.dni" type="text" class="form-control"> </div> </div> <p class="small text-muted">* Campos requeridos</p> <div class="alert alert-danger small" ng-if="vm.error">{{ vm.error }}</div> <div class="form-group"> <div class="col-md-8 pull-right"> <button class="btn btn-lg btn-primary btn-block">COTIZAR <i class="fa fa-long-arrow-right"></i></button> </div> <div class="col-md-4"> <button ng-click="vm.clearForm()" class="btn btn-lg btn-default btn-block" type="button">LIMPIAR</button> </div> </div> </form> </div> </div>'),a.put("scripts/views/auth/quoting/quotation.html",'<div class="container"> <div class="list-leads to-uppercase"> <app-lead lead="vm.lead"></app-lead> <app-loader ng-if="vm.loading"></app-loader> </div> <div class="lead leads-container"> <div class="page-header"> <h1 class="text-center text-muted">Cotización</h1> </div> <form ng-submit="vm.updateQuotation()" class="form"> <div class="form-group"> <div class="col-xs-12"> <label>¿Desde dónde se muda?</label> <input ng-disabled="!vm.editable" ng-model="vm.quotation.address_from" ng-blur="vm.calculateRoute()" google-place type="text" class="form-control" autofocus> </div> </div> <div class="form-group"> <div class="col-md-6"> <label>Tipo de vivienda</label> <select ng-disabled="!vm.editable" ng-model="vm.quotation.home_type_from_id" class="form-control"> <option value="">-- Elige un tipo de vivienda --</option> <option ng-repeat="type in vm.homeTypes" value="{{ type.id }}">{{ type.name }}</option> </select> </div> <div class="col-md-6"> <label>Piso</label> <input ng-disabled="!vm.editable" ng-model="vm.quotation.floor_from" type="number" class="form-control"> </div> </div> <div class="form-group"> <div class="col-xs-12"> <label>¿Hasta dónde se muda?</label> <input ng-disabled="!vm.editable" ng-model="vm.quotation.address_to" ng-blur="vm.calculateRoute()" google-place type="text" class="form-control"> </div> </div> <div class="form-group"> <div class="col-md-6"> <label>Tipo de vivienda</label> <select ng-disabled="!vm.editable" ng-model="vm.quotation.home_type_to_id" class="form-control"> <option value="">-- Elige un tipo de vivienda --</option> <option ng-repeat="type in vm.homeTypes" value="{{ type.id }}">{{ type.name }}</option> </select> </div> <div class="col-md-6"> <label>Piso</label> <input ng-disabled="!vm.editable" ng-model="vm.quotation.floor_to" type="number" class="form-control"> </div> </div> <div class="form-group"> <div ng-if="vm.editable" class="text-right"> <button type="button" ng-click="vm.calculateRoute()" class="btn btn-info">Refrescar Mapa</button> </div> <div id="map"></div> </div> <div class="form-group"> <div class="col-xs-6"> <label>Distancia aproximada</label> <input ng-model="vm.distance_aprox" type="text" class="form-control" disabled> </div> <div class="col-xs-6"> <label>Tiempo de viaje</label> <input ng-model="vm.time_travel_aprox" type="text" class="form-control" disabled> </div> </div> <div class="form-group"> <div class="col-md-6"> <label>Tipo de camión</label> <select ng-disabled="!vm.editable" ng-model="vm.quotation.truck_size_type_id" ng-change="vm.calculateTruckPrice(); vm.changeServiceTime()" class="form-control"> <option value="">-- Elige el tipo de camión --</option> <option ng-repeat="truck_size_type in vm.truckSizeTypes" value="{{ truck_size_type.id }}">{{ truck_size_type.name }}</option> </select> </div> <div class="col-md-6"> <label>Tiempo carga y descarga (min)</label> <input ng-disabled="!vm.editable" ng-change="vm.calculateTruckPrice()" ng-model="vm.quotation.packaging_time_aprox" type="number" class="form-control"> </div> </div> <div class="summary"> <div class="page-header"> <h1 class="text-muted">Resumen</h1> </div> <div class="form-group"> <label>Precio por cargar cosas</label> <label ng-disabled="!vm.editable" class="pull-right"><strong>{{ vm.quotation.packaging_price }}</strong></label> </div> <div class="form-group"> <label>Precio transporte al nuevo punto</label> <label ng-disabled="!vm.editable" class="pull-right"><strong>{{ vm.quotation.travel_price }}</strong></label> </div> <div class="form-group"> <label>Precio por mudanza</label> <label ng-disabled="!vm.editable" class="pull-right"><strong>{{ vm.quotation.total_price }}</strong></label> </div> </div> <div class="summary"> <div class="page-header"> <h1 class="text-muted">Total</h1> </div> <div class="form-group"> <div class="col-md-6"> <label>Precio recomendado</label> <input ng-disabled="!vm.editable" value="{{ vm.quotation.total_price + 50 }}" type="text" class="form-control" disabled> </div> <div class="col-md-6"> <label>Precio final</label> <input ng-disabled="!vm.editable" ng-model="vm.quotation.final_price" type="text" class="form-control"> </div> </div> </div> <div class="alert alert-danger small" ng-if="vm.error">{{ vm.error }}</div> <div ng-if="!vm.editable" class="form-group"> <div class="col-md-8 pull-right"> <a ng-click="vm.openInventory()" ladda="vm.saving" class="btn btn-lg btn-primary btn-block">VER INVENTARIO <i class="fa fa-long-arrow-right"></i></a> </div> <div class="col-md-4"> <a ng-click="vm.editable = !vm.editable" class="btn btn-lg btn-default btn-block" type="button">EDITAR</a> </div> </div> <div ng-if="vm.editable" class="form-group"> <div class="col-md-8 pull-right"> <button ladda="vm.saving" class="btn btn-lg btn-primary btn-block">GUARDAR <i class="fa fa-long-arrow-right"></i></button> </div> <div class="col-md-4"> <a ng-click="vm.init()" class="btn btn-lg btn-default btn-block" type="button">CANCELAR</a> </div> </div> </form> </div> </div>'),a.put("scripts/views/auth/quoting/quoting.html",'<div class="container"> <div class="list-leads to-uppercase"> <app-lead lead="vm.lead"></app-lead> <app-loader ng-if="vm.loading"></app-loader> </div> <div class="lead leads-container"> <div class="page-header"> <h1 class="text-center text-muted">Cotizador</h1> </div> <form ng-submit="vm.registerQuotation()" class="form"> <div class="form-group"> <div class="col-xs-12"> <label>¿Desde dónde se muda?</label> <input ng-model="vm.quoting.address_from" ng-blur="vm.calculateRoute()" google-place type="text" class="form-control" autofocus> </div> </div> <div class="form-group"> <div class="col-md-6"> <label>Tipo de vivienda</label> <select ng-model="vm.quoting.home_type_from_id" class="form-control"> <option value="">-- Elige un tipo de vivienda --</option> <option ng-repeat="type in vm.homeTypes" value="{{ type.id }}">{{ type.name }}</option> </select> </div> <div class="col-md-6"> <label>Piso</label> <input ng-model="vm.quoting.floor_from" type="number" class="form-control"> </div> </div> <div class="form-group"> <div class="col-xs-12"> <label>¿Hasta dónde se muda?</label> <input ng-model="vm.quoting.address_to" ng-blur="vm.calculateRoute()" google-place type="text" class="form-control"> </div> </div> <div class="form-group"> <div class="col-md-6"> <label>Tipo de vivienda</label> <select ng-model="vm.quoting.home_type_to_id" class="form-control"> <option value="">-- Elige un tipo de vivienda --</option> <option ng-repeat="type in vm.homeTypes" value="{{ type.id }}">{{ type.name }}</option> </select> </div> <div class="col-md-6"> <label>Piso</label> <input ng-model="vm.quoting.floor_to" type="number" class="form-control"> </div> </div> <div class="form-group"> <div class="text-right"> <button type="button" ng-click="vm.calculateRoute()" class="btn btn-info">Refrescar Mapa</button> </div> <div id="map"></div> </div> <div class="form-group"> <div class="col-xs-6"> <label>Distancia aproximada</label> <input ng-model="vm.distance_aprox" type="text" class="form-control" disabled> </div> <div class="col-xs-6"> <label>Tiempo de viaje</label> <input ng-model="vm.time_travel_aprox" type="text" class="form-control" disabled> </div> </div> <div class="form-group"> <div class="col-md-6"> <label>Tipo de camión</label> <select ng-model="vm.quoting.truck_size_type_id" ng-change="vm.calculateTruckPrice(); vm.changeServiceTime()" class="form-control"> <option value="">-- Elige el tipo de camión --</option> <option ng-repeat="truck_size_type in vm.truckSizeTypes" value="{{ truck_size_type.id }}">{{ truck_size_type.name }}</option> </select> </div> <div class="col-md-6"> <label>Tiempo carga y descarga (min)</label> <input ng-change="vm.calculateTruckPrice()" ng-model="vm.quoting.packaging_time_aprox" type="number" class="form-control"> </div> </div> <div class="summary"> <div class="page-header"> <h1 class="text-muted">Resumen</h1> </div> <div class="form-group"> <label>Precio por cargar cosas</label> <label class="pull-right"><strong>{{ vm.quoting.packaging_price }}</strong></label> </div> <div class="form-group"> <label>Precio transporte al nuevo punto</label> <label class="pull-right"><strong>{{ vm.quoting.travel_price }}</strong></label> </div> <div class="form-group"> <label>Precio por mudanza</label> <label class="pull-right"><strong>{{ vm.quoting.total_price }}</strong></label> </div> </div> <div class="summary"> <div class="page-header"> <h1 class="text-muted">Total</h1> </div> <div class="form-group"> <div class="col-md-6"> <label>Precio recomendado</label> <input value="{{ vm.quoting.total_price + 50 }}" type="text" class="form-control" disabled> </div> <div class="col-md-6"> <label>Precio final</label> <input ng-model="vm.quoting.final_price" type="text" class="form-control"> </div> </div> </div> <div class="alert alert-danger small" ng-if="vm.error">{{ vm.error }}</div> <div class="form-group"> <div class="col-md-8 pull-right"> <button ladda="vm.saving" class="btn btn-lg btn-primary btn-block">GUARDAR <i class="fa fa-long-arrow-right"></i></button> </div> <div class="col-md-4"> <button ng-click="vm.clearForm()" class="btn btn-lg btn-default btn-block" type="button">LIMPIAR</button> </div> </div> </form> </div> </div>'),
a.put("scripts/views/auth/trucks/newTruck.html",'<div class="container"> <div class="leads leads-container text-center"> <div class="list-leads to-uppercase"> <table class="table table-striped"> <thead> <tr> <th></th> <th>Nombres</th> <th>Ubicación</th> <th>Teléfono</th> <th></th> </tr> </thead> <tbody class="text-left"> <tr ng-repeat="item in vm.list"> <td><img src="/images/driver.51d7436a.jpg" class="media-photo"></td> <td>{{ item.first_name }} {{ item.last_name }}</td> <td>{{ item.work_district.name }}</td> <td>{{ item.phone_number }}</td> <td> <a ui-sref="auth.DriverTruck({driverId: item.id})">Registrar camión</a> </td> </tr> <tr ng-if="vm.empty_list"> <td colspan="6">No hay choferes registrados.</td> </tr> </tbody> </table> <app-loader ng-if="vm.loading"></app-loader> </div> </div> <div class="lead leads-container"> <div class="page-header"> <h1 class="text-center text-muted">Camiones</h1> </div> </div> </div>'),a.put("scripts/views/public/signin/signin.html",'<div class="container"> <div class="card card-container"> <img id="profile-img" class="profile-img-card" src="//ssl.gstatic.com/accounts/ui/avatar_2x.png"> <form ng-submit="vm.signIn()" class="form-signin"> <input ng-model="vm.user.email" type="email" class="form-control" placeholder="Correo" required autofocus> <input ng-model="vm.user.password" type="password" class="form-control" placeholder="Contraseña" required> <div ng-if="vm.error" class="alert alert-danger small">{{ vm.error }}</div> <button class="btn btn-primary btn-block" type="submit">Sign in</button> </form> </div> </div>')}]);